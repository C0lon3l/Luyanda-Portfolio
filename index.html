<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luyanda Portfolio</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Poppins:wght@300;400;600;700&display=swap');

    :root {
      --bg-start: #0f172a;
      --bg-middle: #1e293b;
      --bg-end: #334155;
      --card: rgba(30, 41, 59, 0.95);
      --text: #f1f5f9;
      --nav: rgba(15, 23, 42, 0.9);
      --header: rgba(30, 41, 59, 0.95);
      --highlight: #ff6b6b;
      --accent: #4ecdc4;
      --folder-bg: linear-gradient(145deg, #1e293b, #0f172a);
      --footer-bg: linear-gradient(145deg, #1e293b, #0f172a);
      --footer-text: #f1f5f9;
      --dropzone-text: #e2e8f0;
      --shadow: rgba(0, 0, 0, 0.3);
      --success: #48bb78;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(145deg, var(--bg-start), var(--bg-middle), var(--bg-end));
      background-size: 400% 400%;
      animation: gradientBG 20s ease infinite;
      color: var(--text);
      transition: all 0.4s ease;
      scroll-behavior: smooth;
      line-height: 1.6;
      min-height: 100vh;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    header {
      background: var(--header);
      color: white;
      padding: 40px 30px;
      text-align: center;
      box-shadow: 0 8px 25px var(--shadow);
      border-bottom-left-radius: 25px;
      border-bottom-right-radius: 25px;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(10px);
    }
    
    header h1 { font-size: 3em; margin: 0; letter-spacing: 1.5px; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
    header p { font-size: 1.3em; margin-top: 10px; font-weight: 400; opacity: 0.9; }

    nav {
      background: var(--nav);
      display: flex;
      justify-content: center;
      gap: 30px;
      padding: 15px;
      align-items: center;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 15px var(--shadow);
      margin-bottom: 40px;
      backdrop-filter: blur(10px);
      flex-wrap: wrap;
    }
    
    nav a { 
      color: white; 
      text-decoration: none; 
      font-weight: 600; 
      padding: 10px 20px; 
      border-radius: 12px; 
      transition: all 0.3s; 
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 3px;
      background: var(--accent);
      transition: width 0.3s;
    }
    
    nav a.active, nav a:hover { 
      background: rgba(255, 255, 255, 0.15); 
      color: #fff; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.2); 
    }
    
    nav a.active::after, nav a:hover::after { width: 100%; }

    .section { 
      max-width: 1000px; 
      margin: 50px auto; 
      background: var(--card); 
      padding: 40px; 
      border-radius: 20px; 
      box-shadow: 0 12px 30px var(--shadow); 
      transition: all 0.4s; 
      position: relative; 
      overflow: hidden;
      backdrop-filter: blur(10px);
    }
    
    .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--highlight), var(--accent));
    }
    
    .section h2 { 
      font-size: 2.2em; 
      margin-bottom: 25px; 
      color: var(--highlight);
      position: relative;
      display: inline-block;
    }
    
    .section h2::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 50%;
      height: 3px;
      background: var(--accent);
    }

    /* About Section Styles */
    .about-content {
      font-size: 1.1em;
      line-height: 1.8;
    }

    .about-section {
      margin-bottom: 40px;
    }

    .about-section:last-child {
      margin-bottom: 0;
    }

    .about-section h3 {
      color: var(--accent);
      margin-bottom: 15px;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .about-section h3::before {
      font-size: 1.2em;
    }

    .intro h3::before { content: 'üëã'; }
    .truth h3::before { content: 'üí°'; }
    .journey h3::before { content: 'üöÄ'; }
    .beyond h3::before { content: 'üé®'; }
    .now h3::before { content: 'üåü'; }

    .highlight-box {
      background: linear-gradient(145deg, rgba(255, 107, 107, 0.1), rgba(78, 205, 196, 0.1));
      padding: 25px;
      border-radius: 15px;
      border-left: 4px solid var(--highlight);
      margin: 20px 0;
    }

    .quote {
      font-style: italic;
      text-align: center;
      font-size: 1.2em;
      margin: 30px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      border-left: 4px solid var(--accent);
    }

    .skills-pill {
      display: inline-block;
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 16px;
      border-radius: 20px;
      margin: 5px;
      font-size: 0.9em;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .contact-links {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .contact-btn {
      background: var(--accent);
      color: white;
      text-decoration: none;
      padding: 12px 25px;
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      border: none;
      cursor: pointer;
      font-family: inherit;
    }

    .contact-btn:hover {
      background: #3db8ac;
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    }

    .contact-btn.primary {
      background: var(--highlight);
    }

    .contact-btn.primary:hover {
      background: #ff5252;
    }

    .breadcrumb {
      margin-bottom: 20px;
      font-size: 0.95em;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .breadcrumb span {
      cursor: pointer;
      transition: all 0.3s;
    }

    .breadcrumb span:hover {
      color: var(--highlight);
      text-decoration: underline;
    }

    .breadcrumb-separator {
      color: var(--text);
      opacity: 0.5;
    }

    .folder { 
      border-radius: 18px; 
      margin-bottom: 25px; 
      margin-top: 15px;
      position: relative; 
      box-shadow: 0 8px 25px var(--shadow); 
      background: var(--folder-bg); 
      color: #fff; 
      font-weight: 700; 
      text-shadow: 1px 1px 4px rgba(0,0,0,0.3); 
      transition: all 0.3s; 
      padding: 25px; 
      overflow: hidden;
      cursor: pointer;
    }
    
    .folder::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
      pointer-events: none;
    }
    
    .folder:hover { 
      transform: translateY(-7px); 
      box-shadow: 0 15px 35px rgba(0,0,0,0.25); 
    }
    
    .folder h3 { 
      margin: 0; 
      font-size: 1.5em; 
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
    }
    
    .folder h3::before { content: 'üìÅ'; margin-right: 10px; font-size: 1.2em; }

    .file-item { 
      padding: 12px 15px; 
      border-bottom: 1px solid rgba(255,255,255,0.1); 
      transition: all 0.3s; 
      border-radius: 8px;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0,0,0,0.2);
    }
    
    .file-item::before { content: 'üìÑ'; margin-right: 10px; }
    
    .file-item span { flex-grow: 1; }
    
    .file-item:hover { background: rgba(255,255,255,0.05); padding-left: 20px; transform: translateX(5px); }

    .folder-item { 
      padding: 15px 20px; 
      border-bottom: 1px solid rgba(255,255,255,0.1); 
      transition: all 0.3s; 
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0,0,0,0.3);
      cursor: pointer;
    }
    
    .folder-item::before { content: 'üìÅ'; margin-right: 10px; font-size: 1.2em; }
    
    .folder-item:hover { background: rgba(255,255,255,0.05); padding-left: 25px; transform: translateX(5px); }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text);
      opacity: 0.6;
      font-style: italic;
    }

    .empty-state::before {
      content: 'üìÇ';
      display: block;
      font-size: 4em;
      margin-bottom: 15px;
    }

    .delete-btn {
      background: #e53e3e;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85em;
      transition: all 0.3s;
      z-index: 10;
    }

    .delete-btn:hover {
      background: #c53030;
      transform: scale(1.05);
    }

    .insert-btn { 
      cursor: pointer; 
      background: var(--success); 
      color: white; 
      border: none; 
      padding: 12px 20px; 
      border-radius: 10px; 
      transition: all 0.3s; 
      font-weight: 600; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      z-index: 2;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .insert-btn::before { content: '+'; font-size: 1.2em; }
    
    .insert-btn:hover { background: #38a169; box-shadow: 0 6px 18px rgba(0,0,0,0.25); transform: translateY(-2px); }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .dropzone { 
      border: 2px dashed rgba(136, 136, 136, 0.5); 
      border-radius: 14px; 
      padding: 30px; 
      text-align: center; 
      margin-top: 15px; 
      color: var(--dropzone-text); 
      font-style: italic; 
      transition: all 0.3s; 
      background: rgba(255,255,255,0.05); 
      font-weight: 500; 
      position: relative;
      cursor: pointer;
    }
    
    .dropzone::before { content: '‚¨ÜÔ∏è'; font-size: 2em; display: block; margin-bottom: 10px; }
    
    .dropzone.dragover { background: rgba(78, 205, 196, 0.2); border-color: var(--accent); color: var(--accent); }

    /* Resume specific styles */
    .resume-container {
      text-align: center;
      padding: 30px;
    }

    .resume-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .action-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .action-btn:hover {
      background: #3db8ac;
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    }

    .action-btn.view {
      background: var(--highlight);
    }

    .action-btn.view:hover {
      background: #ff5252;
    }

    .no-resume {
      text-align: center;
      padding: 50px 20px;
      color: var(--text);
      opacity: 0.7;
      font-style: italic;
    }

    .no-resume::before {
      content: 'üìÑ';
      font-size: 3em;
      display: block;
      margin-bottom: 15px;
    }

    .resume-info {
      background: rgba(0,0,0,0.2);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .resume-info h3 {
      color: var(--accent);
      margin-bottom: 10px;
    }

    footer { 
      background: var(--footer-bg); 
      color: var(--footer-text); 
      padding: 40px; 
      text-align: center; 
      font-weight: 600; 
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3); 
      box-shadow: 0 8px 25px var(--shadow); 
      border-top-left-radius: 25px; 
      border-top-right-radius: 25px; 
      margin-top: 80px; 
      backdrop-filter: blur(10px);
    }
    
    footer span { 
      font-family: 'Courier New', monospace; 
      font-size: 1.4em; 
      padding: 6px 15px; 
      border-radius: 8px; 
      background: linear-gradient(90deg, var(--highlight), var(--accent));
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    input[type='file'] { display: none; }

    @media (max-width: 768px) {
      header h1 { font-size: 2.2em; }
      header p { font-size: 1.1em; }
      nav { gap: 15px; padding: 12px; }
      nav a { padding: 8px 15px; font-size: 0.9em; }
      .section { padding: 25px; margin: 30px 15px; }
      .section h2 { font-size: 1.8em; }
      .folder { padding: 20px; }
      .resume-actions { flex-direction: column; }
      .action-btn { width: 100%; justify-content: center; }
      .contact-links { flex-direction: column; }
      .contact-btn { width: 100%; justify-content: center; }
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .folder, .file-item, .folder-item { animation: fadeIn 0.5s ease; }

    .section.highlight { animation: highlightFade 1s ease forwards; }
    @keyframes highlightFade { 0% { background-color: rgba(255, 107, 107, 0.15); } 100% { background-color: transparent; } }
  </style>
</head>
<body>
  <header>
    <h1>Luyanda Sonopo</h1>
    <p>Developer ‚Ä¢ Writer ‚Ä¢ Creative</p>
  </header>

  <nav>
    <a onclick="navigateTo('about')" class="active">About</a>
    <a onclick="navigateToHome()">Portfolio</a>
    <a onclick="enterFolder('projects')">Projects</a>
    <a onclick="enterFolder('practice')">Practice Code</a>
    <a onclick="navigateTo('resume')">Resume</a>
  </nav>

  <div id="mainContent"></div>

  <footer>
    <p>¬© 2025 <span>Luyanda Sonopo</span></p>
  </footer>

  <input type="file" id="fileInput" multiple>

  <script>
    const ADMIN_PASSWORD = '7896'; 
    
    // GitHub Configuration - REPLACE WITH YOUR INFO
    const GITHUB_TOKEN = 'YOUR_GITHUB_TOKEN_HERE'; // Paste your token here
    const GITHUB_USERNAME = 'YOUR_GITHUB_USERNAME'; // Your GitHub username
    const REPO_NAME = 'portfolio';

    let currentView = 'about';
    let currentPath = [];
    let currentUploadTarget = null;
    
    let portfolioData = {
      projects: {
        name: "Project Folders",
        subfolders: [],
        files: []
      },
      practice: {
        name: "Practice Code", 
        subfolders: [],
        files: []
      },
      resume: null
    };

    // GitHub API functions
    async function uploadFileToGitHub(file, folderPath = '') {
        const path = folderPath ? `${folderPath}/${file.name}` : file.name;
        
        try {
            const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${path}`, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${GITHUB_TOKEN}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    message: `Add ${file.name} to portfolio`,
                    content: await fileToBase64(file)
                })
            });
            
            const result = await response.json();
            return result;
        } catch (error) {
            console.error('Upload failed:', error);
            alert('Upload failed. Check console for details.');
            return null;
        }
    }

    function fileToBase64(file) {
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onload = () => {
                const base64 = reader.result.split(',')[1];
                resolve(base64);
            };
            reader.readAsDataURL(file);
        });
    }

    // Load saved data
    function loadData() {
      const saved = localStorage.getItem('portfolioData');
      if (saved) {
        portfolioData = JSON.parse(saved);
      }
    }

    // Save data
    function saveData() {
      localStorage.setItem('portfolioData', JSON.stringify(portfolioData));
    }

    window.addEventListener('DOMContentLoaded', () => {
      loadData();
      navigateTo('about');
    });

    function navigateToHome() {
      currentView = 'home';
      currentPath = [];
      
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      document.querySelectorAll('nav a')[1].classList.add('active');
      
      render();
    }

    function navigateTo(view, path = []) {
      currentView = view;
      currentPath = path;
      
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      const navIndex = {
        'about': 0,
        'home': 1,
        'projects': 2,
        'practice': 3,
        'resume': 4
      }[view];
      
      if (navIndex !== undefined) {
        document.querySelectorAll('nav a')[navIndex].classList.add('active');
      }
      
      render();
    }

    function enterFolder(folderType) {
      currentView = folderType;
      currentPath = [];
      
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      document.querySelectorAll('nav a')[folderType === 'projects' ? 2 : 3].classList.add('active');
      
      render();
    }

    function render() {
      const content = document.getElementById('mainContent');
      
      if (currentView === 'about') {
        renderAbout(content);
      } else if (currentView === 'home') {
        renderHome(content);
      } else if (currentView === 'resume') {
        renderResume(content);
      } else {
        renderInsideFolder(content);
      }
    }

    function renderAbout(container) {
      container.innerHTML = `
        <div class="section">
          <h2>About Me</h2>
          <div class="about-content">
            
            <div class="about-section intro">
              <h3>Hi, I'm Luyanda Sonopo</h3>
              <p>Part software developer, part storyteller, part music-maker, full-time human who has consumed enough anime to be considered 70% animated at this point.</p>
              
              <p>I'm a Computer Science and Information Technology graduate from the University of KwaZulu-Natal, and I currently exist somewhere between logic, creativity, and whatever wild idea my brain decides to chase next.</p>
            </div>

            <div class="about-section truth">
              <h3>Let's get something out of the way</h3>
              <div class="highlight-box">
                <p><strong>I did not build this website.</strong></p>
                <p>Front-end is not my expertise ‚Äî not yet, anyway. I don't know HTML, CSS, or JavaScript, and I'm not ashamed to say that.</p>
                <p>My strengths live on the back-end, where I'm most fluent in 
                  <span class="skills-pill">Java</span>. I'm fascinated by how things work, not how they look. The logic, the patterns, the behaviour ‚Äî that's where I feel at home. But I'm always learning, always growing, and I'm definitely interested in front-end in the future. My learning journey never ends.</p>
              </div>
            </div>

            <div class="about-section journey">
              <h3>Where it all started</h3>
              <p>My path to software development started way before I touched my first IDE.</p>
              <p>As a kid, I tore apart every gadget I could find ‚Äî remotes, toys, phones, anything with screws. Not because I loved hardware, but because I genuinely thought I'd open it and see the logic inside. I wanted to understand how things worked.</p>
              
              <div class="quote">
                "I wanted to build the logic that makes things come alive."
              </div>
              
              <p>Growing up, I discovered something called software ‚Äî the invisible brain behind everything I couldn't find in the hardware. And just like that, it clicked. That's when I knew:</p>
            </div>

            <div class="about-section beyond">
              <h3>Beyond the code</h3>
              <p>Outside of development, I'm a crazy anime fan. I love stories ‚Äî big worlds, intense emotions, quiet moments, absurd plots, all of it. Anime shapes a lot of my creativity.</p>
              
              <p>I'm also a writer. I write books, lyrics, and sometimes novels I almost finish but never quite bring to the end‚Ä¶ and that's okay. Creativity isn't always linear. Sometimes it's just vibes.</p>
              
              <p>Music is another part of me ‚Äî I enjoy listening to it, feeling it, and creating lyrics when the inspiration hits.</p>
            </div>

            <div class="about-section now">
              <h3>And now we're here</h3>
              <div class="highlight-box">
                <p><strong>Everything you see inside this website ‚Äî the writing, the content, the thoughts ‚Äî is entirely my creation.</strong></p>
                <p>No plagiarism. No shortcuts. No copy-paste magic. Just me.</p>
              </div>
              
              <p style="text-align: center; font-size: 1.2em; margin-top: 30px;">
                <em>Welcome to my world ‚Äî the logic, the art, and the beautiful chaos in between.</em>
              </p>
            </div>

            <div class="contact-links">
              <a href="mailto:luyandasonopo@example.com" class="contact-btn primary">
                üìß Get In Touch
              </a>
              <button class="contact-btn" onclick="navigateToHome()">
                üíº Explore My Work
              </button>
            </div>

          </div>
        </div>
      `;
    }

    function renderHome(container) {
      container.innerHTML = `
        <div class="section">
          <div class="folder" onclick="enterFolder('projects')">
            <h3>Project Folders</h3>
          </div>
        </div>

        <div class="section">
          <div class="folder" onclick="enterFolder('practice')">
            <h3>Practice Code</h3>
          </div>
        </div>

        <div class="section">
          <h2>Resume</h2>
          <div class="resume-container">
            ${portfolioData.resume ? `
              <div class="resume-info">
                <h3>Current Resume</h3>
                <p><strong>File:</strong> ${portfolioData.resume.name}</p>
                <p><strong>Size:</strong> ${(portfolioData.resume.size / 1024).toFixed(1)} KB</p>
              </div>
              <div class="resume-actions">
                <button class="action-btn" onclick="downloadResume()">
                  üì• Download Resume
                </button>
                <button class="action-btn" onclick="replaceResume()" style="background: var(--highlight);">
                  üîÑ Replace Resume
                </button>
              </div>
            ` : `
              <div class="no-resume">
                No resume uploaded yet
                <div style="margin-top: 20px;">
                  <button class="insert-btn" onclick="uploadResume()">Upload Resume</button>
                </div>
              </div>
            `}
          </div>
        </div>
      `;
    }

    function renderInsideFolder(container) {
      let currentData = getCurrentFolderData();
      const title = currentPath.length > 0 ? currentPath[currentPath.length - 1] : currentData.name;
      const breadcrumbHTML = renderBreadcrumb();
      
      let foldersHTML = '';
      currentData.subfolders.forEach((folder, index) => {
        foldersHTML += `
          <div class="folder-item" onclick="openFolder('${folder.name}')">
            <span style="flex-grow:1;">${folder.name}</span>
            <button class="delete-btn" onclick="event.stopPropagation(); deleteFolder(${index})">Delete</button>
          </div>
        `;
      });

      let filesHTML = '';
      currentData.files.forEach((file, index) => {
        const icon = getFileIcon(file.type);
        // Use GitHub download URL if available, otherwise fallback to simulated download
        const downloadUrl = file.download_url || '#';
        filesHTML += `
          <div class="file-item">
            <span>${icon}</span>
            <span>${file.name}</span>
            <div>
              <button class="action-btn" onclick="downloadFile(${index})" style="padding: 5px 10px; font-size: 0.8em; margin-right: 5px;">Download</button>
              <button class="delete-btn" onclick="deleteFile(${index})">Delete</button>
            </div>
          </div>
        `;
      });

      const emptyHTML = (!foldersHTML && !filesHTML) ? '<div class="empty-state">This folder is empty</div>' : '';

      container.innerHTML = `
        <div class="section">
          <h2>${title}</h2>
          ${breadcrumbHTML}
          <div class="action-buttons">
            <button class="insert-btn" onclick="createFolder()">New Folder</button>
            <button class="insert-btn" onclick="uploadFiles()">Upload Files</button>
          </div>
          <div id="dropArea" class="dropzone" onclick="uploadFiles()">
            Drag & Drop files here or click to upload
          </div>
          ${foldersHTML}
          ${filesHTML}
          ${emptyHTML}
        </div>
      `;

      setupDropzone();
    }

    function getCurrentFolderData() {
      let currentData = portfolioData[currentView];
      for (let folderName of currentPath) {
        currentData = currentData.subfolders.find(f => f.name === folderName);
      }
      return currentData;
    }

    function getFileIcon(fileType) {
      if (fileType?.startsWith('image/')) return 'üñºÔ∏è';
      if (fileType?.startsWith('video/')) return 'üé•';
      if (fileType?.startsWith('audio/')) return 'üéµ';
      if (fileType?.includes('pdf')) return 'üìï';
      if (fileType?.includes('word') || fileType?.includes('document')) return 'üìÑ';
      if (fileType?.includes('zip') || fileType?.includes('archive')) return 'üì¶';
      if (fileType?.includes('text')) return 'üìù';
      return 'üìÑ';
    }

    function renderBreadcrumb() {
      let breadcrumb = '<div class="breadcrumb">';
      const rootName = currentView === 'projects' ? 'Project Folders' : 'Practice Code';
      breadcrumb += `<span onclick="enterFolder('${currentView}')">${rootName}</span>`;
      
      for (let i = 0; i < currentPath.length; i++) {
        breadcrumb += ' <span class="breadcrumb-separator">/</span> ';
        if (i === currentPath.length - 1) {
          breadcrumb += `<span style="color: var(--text);">${currentPath[i]}</span>`;
        } else {
          const pathUpToHere = currentPath.slice(0, i + 1);
          breadcrumb += `<span onclick="navigateToPath('${currentView}', ${JSON.stringify(pathUpToHere).replace(/"/g, '&quot;')})">${currentPath[i]}</span>`;
        }
      }
      
      breadcrumb += '</div>';
      return breadcrumb;
    }

    function navigateToPath(view, path) {
      currentView = view;
      currentPath = path;
      render();
    }

    function setupDropzone() {
      const dropzone = document.getElementById('dropArea');
      if (!dropzone) return;
      
      dropzone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropzone.classList.add('dragover');
      });

      dropzone.addEventListener('dragleave', () => {
        dropzone.classList.remove('dragover');
      });

      dropzone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropzone.classList.remove('dragover');
        
        const password = prompt('Enter admin password:');
        if (password !== ADMIN_PASSWORD) { 
          alert('Incorrect password!'); 
          return; 
        }

        const files = Array.from(e.dataTransfer.files);
        handleFolderFileUpload(files);
      });
    }

    function renderResume(container) {
      container.innerHTML = `
        <div class="section">
          <h2>Resume</h2>
          <div class="resume-container">
            ${portfolioData.resume ? `
              <div class="resume-info">
                <h3>Current Resume</h3>
                <p><strong>File:</strong> ${portfolioData.resume.name}</p>
                <p><strong>Size:</strong> ${(portfolioData.resume.size / 1024).toFixed(1)} KB</p>
                <p><strong>Type:</strong> ${portfolioData.resume.type}</p>
              </div>
              <div class="resume-actions">
                <button class="action-btn" onclick="downloadResume()">
                  üì• Download Resume
                </button>
                <button class="action-btn" onclick="replaceResume()" style="background: var(--highlight);">
                  üîÑ Replace Resume
                </button>
                <button class="delete-btn" onclick="deleteResume()" style="padding: 12px 25px; font-size: 1em;">
                  üóëÔ∏è Delete Resume
                </button>
              </div>
            ` : `
              <div class="no-resume">
                No resume uploaded yet
                <div style="margin-top: 20px;">
                  <button class="insert-btn" onclick="uploadResume()">Upload Resume</button>
                </div>
              </div>
            `}
          </div>
        </div>
      `;
    }

    function openFolder(folderName) {
      currentPath.push(folderName);
      render();
    }

    function createFolder() {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }
      
      const folderName = prompt('Folder Name:');
      if (!folderName) return;

      let currentData = getCurrentFolderData();
      currentData.subfolders.push({
        name: folderName,
        subfolders: [],
        files: []
      });

      saveData();
      render();
    }

    function uploadFiles() {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }

      currentUploadTarget = 'folder';
      document.getElementById('fileInput').click();
    }

    function uploadResume() {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }

      currentUploadTarget = 'resume';
      document.getElementById('fileInput').click();
    }

    function replaceResume() {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }

      if (portfolioData.resume && !confirm('Replace current resume?')) return;
      currentUploadTarget = 'resume';
      document.getElementById('fileInput').click();
    }

    async function handleFolderFileUpload(files) {
      let currentData = getCurrentFolderData();
      
      for (let file of files) {
        // Upload to GitHub
        const result = await uploadFileToGitHub(file, currentPath.join('/'));
        
        if (result && result.content) {
          // Add to local data with GitHub URL
          currentData.files.push({
            name: file.name,
            type: file.type,
            size: file.size,
            lastModified: file.lastModified,
            download_url: result.content.download_url,
            github_path: result.content.path
          });
        } else {
          // Fallback to local storage if GitHub upload fails
          currentData.files.push({
            name: file.name,
            type: file.type,
            size: file.size,
            lastModified: file.lastModified
          });
        }
      }
      
      saveData();
      render();
    }

    document.getElementById('fileInput').onchange = function(e) {
      const files = Array.from(e.target.files);
      
      if (currentUploadTarget === 'resume') {
        if (files.length > 0) {
          const file = files[0];
          portfolioData.resume = {
            name: file.name,
            type: file.type,
            size: file.size,
            lastModified: file.lastModified
          };
          saveData();
          render();
        }
      } else if (currentUploadTarget === 'folder') {
        handleFolderFileUpload(files);
      }
      
      e.target.value = '';
    };

    function downloadResume() {
      if (!portfolioData.resume) return;
      
      if (portfolioData.resume.download_url) {
        // Real download from GitHub
        window.open(portfolioData.resume.download_url, '_blank');
      } else {
        // Simulated download
        alert(`Downloading: ${portfolioData.resume.name}\n\nFile would be downloaded from GitHub.`);
        const link = document.createElement('a');
        link.download = portfolioData.resume.name;
        link.href = '#';
        link.click();
      }
    }

    function downloadFile(index) {
      let currentData = getCurrentFolderData();
      const file = currentData.files[index];
      
      if (file.download_url) {
        // Real download from GitHub
        window.open(file.download_url, '_blank');
      } else {
        // Simulated download
        alert(`Downloading: ${file.name}\n\nFile would be downloaded from GitHub.`);
        const link = document.createElement('a');
        link.download = file.name;
        link.href = '#';
        link.click();
      }
    }

    function deleteFolder(index) {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }

      if (!confirm('Delete this folder and all its contents?')) return;

      let currentData = getCurrentFolderData();
      currentData.subfolders.splice(index, 1);
      saveData();
      render();
    }

    function deleteFile(index) {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }

      let currentData = getCurrentFolderData();
      currentData.files.splice(index, 1);
      saveData();
      render();
    }

    function deleteResume() {
      const password = prompt('Enter admin password:');
      if (password !== ADMIN_PASSWORD) { 
        alert('Incorrect password!'); 
        return; 
      }

      if (!confirm('Delete resume?')) return;
      
      portfolioData.resume = null;
      saveData();
      render();
    }
  </script>
</body>
</html>
